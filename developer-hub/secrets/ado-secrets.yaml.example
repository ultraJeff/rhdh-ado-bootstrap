# Azure DevOps Integration Secrets for RHDH
#
# To use:
# 1. Copy this file to ado-secrets.yaml (it's gitignored)
# 2. Fill in your Azure DevOps / Entra ID credentials
# 3. Apply with: oc apply -f ado-secrets.yaml
#
# Prerequisites:
# - Azure DevOps organization with repos you want to discover
# - Personal Access Token (PAT) with Code (Read), Build (Read) scopes
# - (Optional) Azure Entra ID app registration for OAuth
#
# For setup instructions, see:
# https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html/dynamic_plugins_reference/con-preinstalled-dynamic-plugins
#
apiVersion: v1
kind: Secret
metadata:
  name: ado-secrets
  namespace: rhdh
  annotations:
    argocd.argoproj.io/sync-wave: "2"
type: Opaque
stringData:
  # Azure DevOps Organization name (for backend plugin)
  # This is the organization name from your Azure DevOps URL:
  # https://dev.azure.com/<AZURE_ORG>
  AZURE_ORG: <your-azure-devops-org>
  
  # Azure DevOps Personal Access Token (for backend plugin and file reading)
  # Create at: https://dev.azure.com/<your-org>/_usersSettings/tokens
  # Required scopes: Code (Read), Build (Read), Work Items (Read)
  AZURE_TOKEN: <your-personal-access-token>
  
  # Azure DevOps catalog location URL (for catalog integration)
  # Full URL to your catalog-info.yaml in Azure DevOps
  # Format: https://dev.azure.com/<org>/<project>/_git/<repo>?path=/catalog-info.yaml&version=GBmain
  AZURE_DEVOPS_CATALOG_URL: <your-catalog-url>
  
  # Azure Entra ID (formerly Azure AD) App Registration credentials
  # These are optional if using PAT above, but needed for OAuth-based access
  # Create an app registration in Azure Portal > Entra ID > App registrations
  AZURE_CLIENT_ID: <your-client-id>              # Application (client) ID
  AZURE_CLIENT_SECRET: <your-client-secret>      # Client secret value
  AZURE_TENANT_ID: <your-tenant-id>              # Directory (tenant) ID
